03:53:54.276 [ForkJoinPool-1-worker-3] INFO  com.ulashchick.podcast.testing.TestListener - Test started
03:53:54.282 [ForkJoinPool-1-worker-3] INFO  üê≥ [cassandra:latest] - Creating container for image: cassandra:latest
03:53:54.315 [ForkJoinPool-1-worker-3] INFO  üê≥ [cassandra:latest] - Container cassandra:latest is starting: 4e80031af1c732baa496332beaeb114a89fc37bad9126cbeea70e9e28e38ff80
03:54:01.095 [ForkJoinPool-1-worker-3] INFO  üê≥ [cassandra:latest] - Container cassandra:latest started in PT6.813467S
03:54:01.096 [ForkJoinPool-1-worker-3] INFO  com.ulashchick.podcast.AbstractIntegrationTest - Cassandra container has been started on localhost:49157. Replacing config.
03:54:01.107 [ForkJoinPool-1-worker-3] INFO  com.ulashchick.podcast.common.DependencyManager - com.ulashchick.podcast.common.config.ConfigService class implementation has been overridden. New DI injector has been created
03:54:01.108 [ForkJoinPool-1-worker-3] INFO  com.ulashchick.podcast.AbstractIntegrationTest - Config has been replaced. Starting application server
03:54:01.116 [ForkJoinPool-1-worker-3] INFO  org.reflections.Reflections - Reflections took 4 ms to scan 2 urls, producing 7 keys and 12 values
03:54:01.118 [ForkJoinPool-1-worker-3] INFO  com.ulashchick.podcast.common.ApplicationServerBuilder - Binding GrpcService: com.ulashchick.podcast.grpc.AuthService
03:54:01.119 [ForkJoinPool-1-worker-3] INFO  com.ulashchick.podcast.common.ApplicationServerBuilder - Binding GrpcService: com.ulashchick.podcast.grpc.PodcastService
03:54:01.119 [ForkJoinPool-1-worker-3] INFO  com.ulashchick.podcast.common.ApplicationServerBuilder - Binding GrpcService: com.ulashchick.podcast.grpc.EchoService
03:54:01.132 [ForkJoinPool-1-worker-3] INFO  org.reflections.Reflections - Reflections took 12 ms to scan 2 urls, producing 7 keys and 61 values
03:54:01.132 [ForkJoinPool-1-worker-3] INFO  com.ulashchick.podcast.common.ApplicationServerBuilder - Environment: test
03:54:01.133 [ForkJoinPool-1-worker-3] INFO  com.ulashchick.podcast.common.persistance.CassandraClient - Initializing cassandra session without keyspace
03:54:01.143 [ForkJoinPool-1-worker-3] WARN  com.datastax.oss.driver.internal.core.session.DefaultSession - You have too many session instances: 7 active, expected less than 4 (see 'advanced.session-leak.threshold' in the configuration)
03:54:01.528 [ForkJoinPool-1-worker-3] INFO  com.ulashchick.podcast.common.persistance.CassandraSession - Connected to Cassandra cluster [localhost/127.0.0.1:49157]
03:54:01.529 [ForkJoinPool-1-worker-3] INFO  com.ulashchick.podcast.common.persistance.CassandraClient - Installing schema
03:54:01.534 [ForkJoinPool-1-worker-3] INFO  org.reflections.Reflections - Reflections took 3 ms to scan 1 urls, producing 4 keys and 4 values
03:54:01.536 [ForkJoinPool-1-worker-3] INFO  com.ulashchick.podcast.common.config.ConfigService - Loading: test/cql-init/001-create-keyspace.cql
03:54:01.537 [ForkJoinPool-1-worker-3] INFO  com.ulashchick.podcast.common.config.ConfigService - Loading: test/cql-init/002-use-keyspace.cql
03:54:01.539 [ForkJoinPool-1-worker-3] INFO  com.ulashchick.podcast.common.config.ConfigService - Loading: test/cql-init/003-create-user-by-email-table.cql
03:54:01.540 [ForkJoinPool-1-worker-3] INFO  com.ulashchick.podcast.common.config.ConfigService - Loading: test/cql-init/004-create-subscriptions-by-user.cql
03:54:01.542 [ForkJoinPool-1-worker-3] INFO  com.ulashchick.podcast.common.persistance.CassandraClient - Executing: 
create keyspace if not exists podcast
    with replication = {'class' : 'SimpleStrategy', 'replication_factor' : 1 }
     and durable_writes = true;

03:54:02.687 [ForkJoinPool-1-worker-3] INFO  com.ulashchick.podcast.common.persistance.CassandraClient - Executing: 
use podcast;

03:54:02.699 [ForkJoinPool-1-worker-3] INFO  com.ulashchick.podcast.common.persistance.CassandraClient - Executing: 
create table if not exists users_by_email
(
    email      varchar primary key,
    id         timeuuid,
    firstName  varchar,
    lastName   varchar,
    imageUrl   varchar
);

03:54:03.887 [ForkJoinPool-1-worker-3] INFO  com.ulashchick.podcast.common.persistance.CassandraClient - Executing: 
create table if not exists subscriptions_by_user
(
    userId timeuuid,
    feedId bigint,
    primary key ((userId), feedId)
);
03:54:05.026 [ForkJoinPool-1-worker-3] INFO  com.ulashchick.podcast.common.persistance.CassandraClient - Schema installed. Re-initializing cassandra session
03:54:05.027 [ForkJoinPool-1-worker-3] INFO  com.ulashchick.podcast.common.persistance.CassandraSession - Re-initializing session.
03:54:05.058 [ForkJoinPool-1-worker-3] WARN  com.datastax.oss.driver.internal.core.session.DefaultSession - You have too many session instances: 8 active, expected less than 4 (see 'advanced.session-leak.threshold' in the configuration)
03:54:05.194 [ForkJoinPool-1-worker-3] INFO  com.ulashchick.podcast.common.persistance.CassandraSession - Connected to Cassandra cluster [localhost/127.0.0.1:49157]
03:54:05.194 [ForkJoinPool-1-worker-3] INFO  com.ulashchick.podcast.AbstractIntegrationTest - Application server for test has been started on 4ae0acec-dbc5-4112-a0dc-5629fe419300
03:54:05.243 [pool-11-thread-1] INFO  com.ulashchick.podcast.common.persistance.CassandraClient - Executing INSERT INTO subscriptions_by_user (userid,feedid) VALUES (ae9cb0f0-8892-11ec-ab8c-cf35954a1560,123456) IF NOT EXISTS with CL LOCAL_QUORUM/LOCAL_SERIAL
03:54:05.314 [pool-11-thread-1] INFO  com.ulashchick.podcast.common.persistance.CassandraClient - Executing INSERT INTO subscriptions_by_user (userid,feedid) VALUES (ae9cb0f0-8892-11ec-ab8c-cf35954a1560,123457) IF NOT EXISTS with CL LOCAL_QUORUM/LOCAL_SERIAL
03:54:05.331 [pool-11-thread-2] INFO  com.ulashchick.podcast.common.persistance.CassandraClient - Executing SELECT feedid FROM subscriptions_by_user WHERE userid=ae9cb0f0-8892-11ec-ab8c-cf35954a1560 with CL LOCAL_QUORUM/LOCAL_SERIAL
03:54:05.356 [pool-11-thread-2] INFO  com.ulashchick.podcast.common.persistance.CassandraClient - Executing DELETE FROM subscriptions_by_user WHERE userid=ae9cb0f0-8892-11ec-ab8c-cf35954a1560 AND feedid=123456 with CL LOCAL_QUORUM/LOCAL_SERIAL
03:54:05.385 [pool-11-thread-1] INFO  com.ulashchick.podcast.common.persistance.CassandraClient - Executing DELETE FROM subscriptions_by_user WHERE userid=ae9cb0f0-8892-11ec-ab8c-cf35954a1560 AND feedid=123457 with CL LOCAL_QUORUM/LOCAL_SERIAL
03:54:05.396 [pool-11-thread-1] INFO  com.ulashchick.podcast.common.persistance.CassandraClient - Executing SELECT feedid FROM subscriptions_by_user WHERE userid=ae9cb0f0-8892-11ec-ab8c-cf35954a1560 with CL LOCAL_QUORUM/LOCAL_SERIAL
03:54:05.655 [ForkJoinPool-1-worker-3] INFO  com.ulashchick.podcast.testing.TestListener - Test finished: SUCCESSFUL
